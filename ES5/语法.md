# 语法

## 基本语法

### 语句

JavaScript 程序的执行单位为行（line），也就是**一行一行**。一般情况下，每一行就是一个语句。


```js
var a = 1+3;
```

这条语句先用var命令，声明了变量a，然后将1 + 3的运算结果赋值给变量a。

1 + 3叫做表达式（expression），指一个为了得到返回值的计算式。语句和表达式的区别在于，前者主要为了进行某种操作，一般情况下不需要返回值；后者则是为了得到返回值，一定会返回一个值。凡是 JavaScript 语言中预期为值的地方，都可以使用表达式。比如，赋值语句的等号右边，预期是一个值，因此可以放置各种表达式。

### 变量

在JS中,变量的声明与赋值是分开的两个步骤

JavaScript 引擎的工作方式是，先解析代码，获取所有被声明的变量，然后再一行一行地运行。这造成的结果，就是所有的变量的声明语句，都会被提升到代码的头部，这就叫做变量提升（hoisting）。

```JS
var a = 1;
```

上面的代码实际上是

```js
var a;
a = 1;
```

这里强调一点

```js
var a = 1;
var a;
console.log(a);//1
```

如果用``var``声明一个已经存在的变量，是无效的。但是一旦进行了**赋值**操作，则会覆盖掉先前的值

### 区块

JavaScript 使用大括号，将多个相关的语句组合在一起，称为“区块”（block）

```js
{
  var a = 1;
}
console.log(a);//1
```

区块对于``var``命令不构成单独的作用域，与不使用区块没有任何区别。常见的区块``for``,``if``,``while``,``function``等

### 标签

JavaScript 语言允许，语句的前面有标签（label），相当于定位符，用于跳转到程序的任意位置,通常与``continue``和``break``搭配

```js
top:
  for(var i=0;i<3;i++){
    if(i==1) continue top;
    console.log(i);
  }
//0
//2
```

## 数据类型

### 概念

ES5中有六种数据类型:数值(number),字符串(string),布尔值(boolean),undefined,null,对象(object)

数值、字符串、布尔值这三种类型，合称为原始类型（primitive type）的值，即它们是最基本的数据类型，不能再细分了。对象则称为合成类型（complex type）的值，因为一个对象往往是多个原始类型的值的合成，可以看作是一个存放各种值的容器。至于undefined和null，一般将它们看成两个特殊值。

对象是最复杂的数据类型，又可以分成三个子类型。

狭义的对象(object),数组(array),函数(function)

### null 和 undefined

两者还是有一些细微的差别

**null表示"没有对象"，即该处不应该有值** 转为数值时为0

```
1.作为函数的参数，表示为空
2.作为对象原型链的终点
3.为对象和值赋值为空
```

**undefined表示"缺少值"，就是此处应该有一个值，但是还没有定义** 转为数值时为``NaN``

```
1.变量被声明了，但没有赋值时，就等于undefined。
2.调用函数时，应该提供的参数没有提供，该参数等于undefined。
3.对象没有赋值的属性，该属性的值为undefined。
4.函数没有返回值时，默认返回undefined。
```

### 布尔值

如果 JavaScript 预期某个位置应该是布尔值，会将该位置上现有的值自动转为布尔值。转换规则是除了下面六个值被转为false，其他值都视为true。

```js
undefined
null
0
''或""
NaN
false
```

空对象和空数组也是``true``

## 数值

### 整数与浮点数

JavaScript 内部，所有数字都是以64位浮点数形式储存，即使整数也是如此。所以，1与1.0是相同的，是同一个数。

```js
1 === 1.0 // true
```

这就是说，JavaScript 语言的底层根本没有整数，所有数字都是小数（64位浮点数）。容易造成混淆的是，某些运算只有整数才能完成，此时 JavaScript 会自动把64位浮点数，转成32位整数，然后再进行运算

```js
0.3/0.1//2.9999999999999996
0.1+0.2 === 0.3//false
```
#### 数值精度

精度最多只能到53个二进制位，这意味着，绝对值小于等于2的53次方的整数，即-2^53到2^53

#### 数值范围

根据标准，64位浮点数的指数部分的长度是11个二进制位，意味着指数部分的最大值是2047（2的11次方减1）。也就是说，64位浮点数的指数部分的值最大为2047，分出一半表示负数，则 JavaScript 能够表示的数值范围为2^1024到2^-1023（开区间），超出这个范围的数无法表示。**正向溢出为``Infinity``,负向溢出为0**

#### 科学计数法

小数点前数字多于21位，小数点后的零多于5个就会自动转换为科学计数法


#### +0和-0

几乎所有场合+0和-0都是相等的,只有当+0和-0作为分母的时候才不相同

```js
(1/+0)//+Infinity
(1/-0)//-Infinity
```

这两个的结果是不想等的

#### NaN

``NaN``是 JavaScript 的特殊值，表示“非数字”（Not a Number），主要出现在将字符串解析成数字出错的场合。

特点

```js
0/0 //NaN
NaN===NaN//false
NaN与任何数运算都是NaN
NaN不是独立的数据类型，而是一个特殊数值，它的数据类型依然属于Number
typeof NaN//'number'
```

### parseInt && parseFloat && Number

``parseInt``和``parseFloat``相似，用于将字符串转换成数值.特点如下

```
1.如果字符串头部有空格,空格会自动去除
2.是一个一个字符依次转换,如果碰到不能转换成数字的字符,就不在进行下去，返回已经转好的部分
3.如果字符串的第一次字符就不能转换成数字，则返回NaN
4.``parseFloat``可以转换科学技术法为十进制数字
5.遇到空字符串转为NaN
```

``Number``只要碰到字符串就返回``NaN``

### isNaN

判断一个值是否为``NaN``

但是，isNaN只对数值有效，**如果传入其他值，会被先转成数值**。比如，传入字符串的时候，字符串会被先转成NaN，所以最后返回true，这一点要特别引起注意。也就是说，isNaN为true的值，有可能不是NaN，而是一个字符串。

因此判断是否为``NaN``可以利用它与自身不等的特性

```js
function myIsNaN(value){
  return value!==value;
}
```

## 字符串

```js
'a
b
c'
// SyntaxError: Unexpected token ILLEGAL
```
上面代码将一个字符串分成三行，JavaScript 就会报错。

如果长字符串必须分成多行，可以在每一行的尾部使用反斜杠。

```js
var str = 'a\
b\
c';
str // abc
```

字符串可以被视为字符数组，因此可以使用数组的方括号运算符，用来返回某个位置的字符（位置编号从0开始）。**但是仅仅是相似而已，无法改变字符串中的单个字符** ``length``属性也是如此

### 字符集

每个字符在 JavaScript 内部都是以16位（即2个字节）的 UTF-16 格式储存。也就是说，JavaScript 的单位字符长度固定为16位长度，即2个字节。由于历史遗留问题,JavaScript只支持两个字节的字符，**四个字节的字符会识别成两个字符**

### Base64转码

```js
btoa()：任意值转为 Base64 编码
atob()：Base64 编码转为原来的值
```

但这两种方法不适合非ASCII码的字符,要加一个转码环节

```js
function b64Encode(str) {
  return btoa(encodeURIComponent(str));
}

function b64Decode(str) {
  return decodeURIComponent(atob(str));
}
```

## 对象 